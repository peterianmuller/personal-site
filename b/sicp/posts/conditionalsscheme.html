<!DOCTYPE html>
<html>
<head> </head>
<body>
<h1 id="title">Case Analysis and Absolute Value</h1>
<p>Scheme has dope ways of dealing with conditional execution! We don't always want our code to run top to bottom with all parts evaluated. Sicp uses an absolute value procedure to illustrate a few different mechanisms that scheme has to deal with conditonal execution.</p>
<p>Aboluste value is by nature a conditional procedure.</p>
<p>Absolute value using cond:</p>

<pre style="margin: 0; line-height: 125%">(<span style="color: #AA22FF; font-weight: bold">define </span>(<span style="color: #AA22FF">abs </span><span style="color: #B8860B">x</span>)
  (<span style="color: #AA22FF; font-weight: bold">cond </span>((<span style="color: #AA22FF">&lt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) (<span style="color: #AA22FF">- </span><span style="color: #B8860B">x</span>))
        ((<span style="color: #AA22FF">= </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) <span style="color: #666666">0</span>)
        ((<span style="color: #AA22FF">&gt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) <span style="color: #B8860B">x</span>)))
(<span style="color: #AA22FF">abs </span><span style="color: #666666">4</span>)
<span style="color: #008800; font-style: italic">;; 4</span>
</pre></div>



<p>Here, the interpreter checks each predicate (procedure on the left side of cond). Once the interpreter finds a predicate that is true, the value of the entire procedure is the value to the right of that predicate. If none of the predicates are evaluated to true, than the entire expression is evaluated to undefined (23). We would run into this issue if we didn't have a robust abs function. For example:</p>

<!-- HTML generated using hilite.me --><pre style="margin: 0; line-height: 125%">(<span style="color: #AA22FF; font-weight: bold">define </span>(<span style="color: #00A000">bad-abs</span> <span style="color: #B8860B">x</span>)
  (<span style="color: #AA22FF; font-weight: bold">cond </span>((<span style="color: #AA22FF">&gt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) <span style="color: #B8860B">x</span>)
        ((<span style="color: #AA22FF">&lt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) (<span style="color: #AA22FF">- </span><span style="color: #B8860B">x</span>))))

(<span style="color: #00A000">bad-abs</span> <span style="color: #666666">9</span>)
<span style="color: #008800; font-style: italic">;; 9</span>

(<span style="color: #00A000">bad-abs</span> <span style="color: #666666">0</span>)
<span style="color: #008800; font-style: italic">;; undefined</span>
</pre>



<p>Absolute value using else. The special form else can be used to ensure that a conditional expression will return something.</p>
<p>Let's go ahead and make sure that our absolute value expression returns 0 if we pass into 0 as the argument to our (better-abs) procedure:</p>

<!-- HTML generated using hilite.me --><pre style="margin: 0; line-height: 125%">(<span style="color: #AA22FF; font-weight: bold">define </span>(<span style="color: #00A000">better-abs</span> <span style="color: #B8860B">x</span>)
  (<span style="color: #AA22FF; font-weight: bold">cond </span>((<span style="color: #AA22FF">&gt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) <span style="color: #B8860B">x</span>)
        ((<span style="color: #AA22FF">&lt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) (<span style="color: #AA22FF">- </span><span style="color: #B8860B">x</span>))
        (<span style="color: #AA22FF; font-weight: bold">else </span><span style="color: #666666">0</span>)))
</pre>


<p>A less naive version of the above. Since the absolute value of any positive number is itself, we don't really need a separate predicate for when we pass in 0. We only need the procedure to do work on our argument when we pass in a negative number:</p>

<!-- HTML generated using hilite.me --><pre style="margin: 0; line-height: 125%">(<span style="color: #AA22FF; font-weight: bold">define </span>(<span style="color: #00A000">better-abs2</span> <span style="color: #B8860B">x</span>)
  (<span style="color: #AA22FF; font-weight: bold">cond </span>((<span style="color: #AA22FF">&lt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) (<span style="color: #AA22FF">- </span><span style="color: #B8860B">x</span>))
        (<span style="color: #AA22FF; font-weight: bold">else </span><span style="color: #B8860B">x</span>)))
</pre>

<p>As we can see, else can act as an ultimate predicate for cond, ensuring that a defualt value other than undefined can be returned from the procedure.</p>
<p>if. If is used when the interpreter should only needs to choose between two cases in a case analysis (24). If takes one predicate and has a consequent and an alternative. IF the predicate evaluates to true than the interpreter resolves the consequent to a value and returns that value. If the predicate is not evaluated to true, than the interpreter evaluates the alternative and that value is returned.</p>
<p>Since we noticied that absolute value really is a distinction between two cases -positive numbers vs negative numbers- we can refactor our absolute value to incorporate if</p>


<!-- HTML generated using hilite.me --><pre style="margin: 0; line-height: 125%">(<span style="color: #AA22FF; font-weight: bold">define </span>(<span style="color: #00A000">abs-if</span> <span style="color: #B8860B">x</span>)
  (<span style="color: #AA22FF; font-weight: bold">if </span>(<span style="color: #AA22FF">&lt; </span><span style="color: #B8860B">x</span> <span style="color: #666666">0</span>) (<span style="color: #AA22FF">- </span><span style="color: #B8860B">x</span>)
      <span style="color: #B8860B">x</span>))

(<span style="color: #00A000">abs-if</span> <span style="color: #666666">9</span>)
<span style="color: #008800; font-style: italic">;; 9</span>

(<span style="color: #00A000">abs-if</span> <span style="color: #666666">-7</span>)
<span style="color: #008800; font-style: italic">;;7</span>

(<span style="color: #00A000">abs-if</span> <span style="color: #666666">0</span>)
<span style="color: #008800; font-style: italic">;;0</span>
</pre>


<p>Here, our predicate is (&lt; x 0), which will see if the argument we pass into the expression is less than 0. If the argument is less than 0, the predicate evaluates to true and the consequent is evaluated and the value of the consequent is returned. The consequent uses the procedure -, which when used with one argument, switches the value of that argument from negative ti positive and vice-versa.</p>
</body>
</html>
